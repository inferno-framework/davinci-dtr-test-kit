Req Set,ID,URL,Requirement,Conformance,Actors,Conditionality,Not Tested Reason,Not Tested Details,Da Vinci DTR SMART App Test Suite Short ID(s),Da Vinci DTR SMART App Test Suite Full ID(s)
hl7.fhir.us.davinci-dtr_2.0.1,3,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,Da Vinci DTR [SMART Client] implementations **SHALL** conform to the US Core IG [Must Support](http://hl7.org/fhir/us/core/STU3.1.1/general-guidance.html#must-support) [Requestor] Guidance  where US Core IG resources are used.,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,4,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,DTR apps and EHRs that take on DTR app responsibility **SHALL** be able to render Questionnaires,SHALL,"Full EHR,SMART Client",false,,,1.1.2.01,dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_static_workflow-dtr_smart_app_custom_static_rendering-dtr_rendering_attest
hl7.fhir.us.davinci-dtr_2.0.1,5,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,DTR apps and EHRs that take on DTR app responsibility **SHALL** be able to render ... QuestionnaireResponses.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,6,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: ... QuestionnaireResponse.questionnaire.questionnaireDisplay,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,7,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: ... [QuestionnaireResponse.questionnaire.resolve().title],SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,8,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: ... QuestionnaireResponse.authored,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,9,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: .. QuestionnaireResponse.author.resolve().name,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,10,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … QuestionnaireResponse.source.resolve().name,SHALL,"Full EHR,SMART Client",false,Not Tested,"QuestionnaireResponse.source is not must support or required, so these systems are not required to support it.",NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,11,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … QuestionnaireResponse.item.text,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,12,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … QuestionnaireResponse.item.value - all data types,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,13,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … The same [QuestionnaireResponse.item.text] for all nested items,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,14,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … The same [all data types of QuestionnaireResponse.item.value] for all nested items,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,15,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[Form filling systems] **SHALL** also handle all mustSupport elements within the Questionnaire profile,SHALL,"Full EHR,SMART Client",false,,,"3.04, 3.05","dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_questionnaire_must_support, dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_must_support_attest"
hl7.fhir.us.davinci-dtr_2.0.1,16,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,"[Form filling systems] **SHALL** …  provide visual cues where those elements impact expected user action (e.g., required answers, need for signatures, etc.)",SHALL,"Full EHR,SMART Client",false,,,3.05,dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_must_support_attest
hl7.fhir.us.davinci-dtr_2.0.1,17,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[Form filling] systems **SHOULD** be able to display Q[uestionnaire]R[esponse].item.itemMedia,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,19,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#impact-on-payer-processes,"In situations where the DTR App is aware of the likely billing codes at the time of ordering, it might send these codes as additional CodeableConcept.coding repetitions to assist in server processing.",MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,20,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#impact-on-payer-processes,"If CPT is used , note the ability to convey CPT modifier codes via post-coordination as described in the Using CPT page on [terminology.hl7.org](https://terminology.hl7.org/).",MAY,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,21,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,[A]ll DTR apps **SHALL** be registered with the payer systems with which they communicate.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,29,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,"Even after an application has been successfully registered, … EHRs **SHOULD** monitor the application behavior",SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,30,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,"Even after an application has been successfully registered, … EHRs ... **MAY** suspend an application’s access if it is suspected of malicious behavior.",MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,31,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,"Some payers may create Questionnaires that rely on code systems that require licensing for use where there isn’t already a cross-U.S. license in place (e.g., UB, CPT). In such cases, the payer, provider, and if necessary, the SMART on FHIR app vendor will need to have the relevant licenses to display, store, and retransmit the information captured.",SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,32,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,The expectations around licensing requirements should be established as part of the configuration process between the parties.,SHOULD,"Full EHR,Light EHR,SMART Client,Payer Service",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,35,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-use,DTR apps and Full EHRs **SHALL** support ... [[standard](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-std-questionnaire.html) ... Questionnaires.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,36,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-use,DTR apps and Full EHRs **SHALL** support ... [adaptive](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-questionnaire-adapt.html)] ... Questionnaires.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,38,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#adaptive-form-considerations,"If the [[`questionnaire-adaptive`](http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-questionnaireAdaptive)] extension is simply a boolean value of ‘true’, then the [[`$next-question`](http://hl7.org/fhir/uv/sdc/STU3/OperationDefinition-Questionnaire-next-question.html)] operation endpoint [for the client to use] is the payer base URL. (i.e., [base]/$next-question).",SHALL,"Full EHR,SMART Client",true,,,"1.2.1.04, 2.3.1.1.04, 2.3.2.1.03, 2.3.3.1.03","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_custom_adaptive_retrieval-dtr_adaptive_response_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_adaptive_retrieval-dtr_smart_app_adaptive_initial_retrieval-dtr_adaptive_response_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation"
hl7.fhir.us.davinci-dtr_2.0.1,39,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#adaptive-form-considerations,"If the [[`questionnaire-adaptive`](http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-questionnaireAdaptive)] extension is a url, then that is the base for the next question [[operation](http://hl7.org/fhir/uv/sdc/STU3/OperationDefinition-Questionnaire-next-question.html) endpoint for the client to use] (i.e., [url]/$next-question).",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,51,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determinations-from-adaptive-forms,"[When a payer returns a coverage-information extension indicating 'additional documentation required', a client] **MAY** ... [trigger] a subsequent launch of DTR, or could result in the DTR client prompting the user as to whether they want to move on to filling out the new form(s).",MAY,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,65,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-design,Elements flagged as mustSupport [in the [Standard Questionnaire profile](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-std-questionnaire.html)] **SHALL** be supported by DTR Apps and Full EHRs.,SHALL,"Full EHR,SMART Client",false,,,"3.04, 3.05","dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_questionnaire_must_support, dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_must_support_attest"
hl7.fhir.us.davinci-dtr_2.0.1,66,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-design,Elements flagged as mustSupport [in the [[Adaptive Questionnaire profile](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-questionnaire-adapt.html)] **SHALL** be supported by DTR Apps and Full EHRs.,SHALL,"Full EHR,SMART Client",false,,,"3.04, 3.05","dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_questionnaire_must_support, dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_must_support_attest"
hl7.fhir.us.davinci-dtr_2.0.1,67,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-design,[Questionnaire client] systems **SHOULD** also support all non mustSupport data extensions included in the differential of the DTR Questionnaire profiles as per SDC documentation for those elements and extensions,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,68,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-design,"[Questionnaire client] systems … **SHALL** gracefully handle the presence of these elements [representing Qestionnaire data extensions that are not must support]  if not supported (i.e., non-support for an element **SHALL NOT** interfere with a user’s ability to complete a QuestionnaireResponse.)",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,76,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#provider-attestation,Attachments [for attachment type questions] might be found … by the provider directly uploading something to the Questionnaire rendering tool.,MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,78,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-expiry,The DTR App or EHR can then check against that [Questionnaire.effectivePeriod] period when resuming a previously stored QuestionnaireResponse [and discard it if the period has ended].,SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,91,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#organizing-cql-within-questionnaires,"If a given variable evaluates to null the answer will be left empty, for the end user to complete.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,103,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determination-of-payers-supported-by-a-dtr-app,The developer of SMART on FHIR DTR apps **SHALL** define an endpoint maintaining a list of payers currently supported by that app.,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,106,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determination-of-payers-supported-by-a-dtr-app,Different endpoints **SHALL** be defined for different versions of the application in situations where support for payers varies by application version.,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,109,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determination-of-payers-supported-by-a-dtr-app,Accessing the [supported payers] endpoint … **SHALL** be performed over TLS.,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,110,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determination-of-payers-supported-by-a-dtr-app,The returned JSON object will contain a “payers” property referring to an array of objects.,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,111,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determination-of-payers-supported-by-a-dtr-app,"Each [""payers""]  object will have an id … property … with string values.",SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,112,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determination-of-payers-supported-by-a-dtr-app,"Each [""payers""]  object will have … [a] name property ... with string values.",SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,113,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determination-of-payers-supported-by-a-dtr-app,It is possible that additional properties [in the object returned from the supported payers endpoint] **MAY** be supported in the future.,MAY,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,118,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,"When the DTR process is being launched, the ... DTR process **SHALL** follow the procedures established by the SMART App Launch Framework - specifically the [SMART App Launch Framework’s EHR launch sequence](https://www.hl7.org/fhir/smart-app-launch/app-launch.html#launch-app-ehr-launch).",SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,120,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,The ... patient launch context **SHALL** be requested,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,121,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,The openId ... launch context **SHALL** be requested,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,122,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,The ... User... launch context **SHALL** be requested,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,130,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,"If these [Coverage and request, QuestionnaireResponse, or Task instances] are not passed in as part of context, then the app **MAY** ... raise an error",MAY,SMART Client,true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,131,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,"If these [Coverage and request, QuestionnaireResponse, or Task instances] are not passed in as part of context, then  the app **MAY** ... guide the user to select the needed records.",MAY,SMART Client,true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,132,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,"In addition to launch contexts, the SMART app will need to request scopes for the type of information it needs to access and manipulate.",SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,134,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … Patient,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,135,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … Coverage,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,136,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … QuestionnaireResponse,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,137,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … Encounter,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,138,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … ServiceRequest,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,139,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … MedicationRequest,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,140,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … DeviceRequest,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,141,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … Appointment,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,142,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … NutritionOrder,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,143,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following resources: … VisionPrescription,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,144,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following … [referenced] resources: … Practitioner,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,145,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following … [referenced] resources: … PractitionerRole,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,146,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following … [referenced] resources: … Organization,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,147,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,the app will require [and request] read access to the following … [referenced] resources: … Location,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,148,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,"However, typically CQL in Questionnaires will also need access to Observation, Condition, Procedure, DocumentReference and potentially others. Therefore, in most cases, apps will simply request patient/*.rs and patient/questionnaireresponse.cu.",SHOULD,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,149,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#launching-a-dtr-smart-app,"However, apps **MAY** opt to be more restrictive in their access requests if they are confident that they can do so while meeting payer CQL needs and EHRs indicate this is desirable.",MAY,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,152,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#authenticating-dtr-client-to-payer-api,"The scopes necessary [for a DTR client to request from the payer] are:

- system/questionnaire.rs
- system/valueset.rs
- system/library.rs",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,153,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"If the launch context did not include Coverages, a QuestionnaireResponse or a Request or Encounter, the DTR app **MAY** error",MAY,SMART Client,true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,154,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"If the launch context did not include Coverages, a QuestionnaireResponse or a Request or Encounter, the DTR app ... **SHOULD** allow the user to search to find one to use as context for the DTR session",SHOULD,SMART Client,true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,155,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"[If the client allows the user to search for launch context] QuestionnaireResponses would be filtered by patient, a status of in-progress, and a context that is not empty",SHOULD,SMART Client,true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,156,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"[If the client allows the user to search for launch context] requests and encounters would be filtered by patient, active status, and any other standard search parameters the DTR client chooses to offer.",SHOULD,SMART Client,true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,157,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"[DTR SMART Clients should] retrieve the referenced fhirUser, patient, and fhirContext resources referenced in the SMART authorization response by performing read or search operations",SHOULD,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,158,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"Search operations allow _including the requester, performer and location resources for encounters and request resources, which [should be used since the instances] will be needed later.",SHOULD,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,159,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"For any Request resources or Encounter resources passed in context, [DTR SMART Clients **SHOULD**] perform a search to see if there are any QuestionnaireResponses associated with those orders using the [dtr-context](https://hl7.org/fhir/us/davinci-dtr/STU2/SearchParameter-dtr-context.html) search parameter",SHOULD,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,160,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"If no Request or Encounter resource was passed as context, [DTR SMART Clients should] check any provided QuestionnaireResponse for a ‘context’ extension identifying any associated requests or encounters",SHOULD,SMART Client,true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,161,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"[if requests or encounters were identified in the QustionnaireResponse 'context'  extension, DTR SMART Clients **SHOULD**]  perform searches to retrieve them with _includes for requester, performer, etc.",SHOULD,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,162,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,[DTR SMART Clients should] Look in the Request or Encounter resources (if any) passed from context or referenced by a QuestionnaireResponse (if any) to see if there is an existing [coverage-information}(https://build.fhir.org/ig/HL7/davinci-crd/StructureDefinition-ext-coverage-information.html) extension,SHOULD,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,163,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"If [coverage information is] found, [DTR SMART Clients should] look at the Coverages as well as the coverage-assertion-id in such extensions.",SHOULD,SMART Client,true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,164,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-launch-context-information,"[DTR SMART Clients should] Determine which payers are associated with the coverages found, and then retrieve Questionnaire packages from each payer using the context information found.",SHOULD,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,165,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,The [[`$questionnaire-package`](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html)] operation will be invoked with a ‘POST’,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,166,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,The [[`$questionnaire-package`](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html)] operation will … [target] the base endpoint associated with the coverages provided based on payer configuration.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,167,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,"If multiple Coverages are provided that are associated with payers having different endpoints, then the operation will be invoked once per payer endpoint. e.g., POST [base]/$questionnaire-package",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,168,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,The operation will be invoked passing a [DTR Questionnaire Package Input Parameters](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-qpackage-input-parameters.html),SHALL,"Full EHR,SMART Client",false,,,"1.1.1.02, 1.2.1.02, 2.1.1.02, 2.2.1.02, 2.3.1.1.02, 3.02","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_static_workflow-dtr_smart_app_custom_static_retrieval-dtr_qp_request_validation, dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_custom_adaptive_retrieval-dtr_qp_request_validation, dtr_smart_app-Group02-dtr_smart_app_resp_workflow-dtr_resp_qp-dtr_qp_request_validation, dtr_smart_app-Group02-dtr_smart_app_static_dinner_workflow-dtr_smart_app_static_retrieval-dtr_qp_request_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_adaptive_retrieval-dtr_smart_app_adaptive_initial_retrieval-dtr_qp_request_validation, dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_qp_request_validation"
hl7.fhir.us.davinci-dtr_2.0.1,170,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,"If any of the retrieved Questionnaires have an effectivePeriod that ends prior to the current date, then the DTR client **SHALL** change the status of any retrieved work-in-progress QuestionnaireResponses for the expired Questionnaires to ‘stopped’",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,171,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,"If any of the retrieved Questionnaires have an effectivePeriod that ends prior to the current date, then the DTR client **SHALL** ... notify the user that the previously recorded content has expired.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,172,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,"If an expired Questionnaire is retrieved when it wasn’t explicitly requested by referring to a canonical version, but instead by passing in the relevant order(s) and/or context id, the DTR client **SHOULD** report an error to the payer.",SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,173,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#pre-populating-questionnaireresponses,"Prior to exposing the draft QuestionnaireResponse to the user for completion and/or review, the DTR client **SHALL** execute all CQL necessary to resolve the initialExpression, candidateExpression and calculatedExpression extensions found in the Questionnaire for any enabled elements.",SHALL,"Full EHR,SMART Client",false,,,"1.2.3.03, 2.1.3.03, 2.2.3.03, 2.3.4.03","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_resp_workflow-dtr_resp_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_static_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation"
hl7.fhir.us.davinci-dtr_2.0.1,174,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#pre-populating-questionnaireresponses,All items that are pre-populated …  from data retrieved from the EHR ... **SHALL** have their origin.source set to ‘auto’.,SHALL,"Full EHR,SMART Client",false,,,"1.2.3.03, 2.1.3.03, 2.2.3.03, 2.3.4.03","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_resp_workflow-dtr_resp_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_static_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation"
hl7.fhir.us.davinci-dtr_2.0.1,176,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#execution-sequence,"The client will proceed through the Questionnaire, and for any question that is associated with the result of a CQL expression, that specific CQL statement will be executed.",SHALL,"Full EHR,SMART Client",false,,,"1.2.3.03, 2.1.3.03, 2.2.3.03, 2.3.4.03","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_resp_workflow-dtr_resp_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_static_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation"
hl7.fhir.us.davinci-dtr_2.0.1,177,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#execution-sequence,The DTR client **SHALL** use result caching so that [CQL execution] results that are already available will be reused without requesting them again.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,178,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#execution-sequence,DTR clients **SHALL** iterate as necessary [executing CQL to prepopulate a enabled elements] until a steady state is reached.,SHALL,"Full EHR,SMART Client",false,,,"1.2.3.03, 2.1.3.03, 2.2.3.03, 2.3.4.03","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_resp_workflow-dtr_resp_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_static_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation"
hl7.fhir.us.davinci-dtr_2.0.1,179,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#execution-sequence,"If dependencies are such that a steady state cannot be reached (e.g., an item that is enabled causes a value to be set which causes a different item to be enabled, that then disables the first item…), then the Questionnaire **SHALL** be treated as erroneous and attempts at automatic population **SHALL** end, with the user being informed of that.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,180,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieval-of-patient-fhir-resources-to-supply-to-cql-execution-engine,The DTR client **SHALL** retrieve the FHIR resources specified in the dataRequirement section of a Library.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,181,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieval-of-patient-fhir-resources-to-supply-to-cql-execution-engine,SMART apps will … [retrieve resources in the dataRequiements section of Library] using the access token provided [by the Light EHR] on launch.,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,182,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieval-of-patient-fhir-resources-to-supply-to-cql-execution-engine,"The app’s CQL execution engine **SHOULD** constrain queries to reduce data retrieval overhead. (For example, if the CQL logic filters for medications meeting certain conditions, it is acceptable if the engine retrieves all medications for the patient, even if a more constrained query was possible).",SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,183,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieval-of-patient-fhir-resources-to-supply-to-cql-execution-engine,"To reduce data transfers and increase overall speed, data **MAY** be fetched [by clients] as needed.",MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,184,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieval-of-patient-fhir-resources-to-supply-to-cql-execution-engine,the app’s execution engine **MAY** be implemented using a different strategy (for example by doing bulk fetches before starting execution).,MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,185,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-adaptive-questionnaires,"The population process must ... happen after each call to [`$next-question`](http://hl7.org/fhir/uv/sdc/STU3/OperationDefinition-Questionnaire-next-question.html), populating any newly available questions. DTR clients **SHALL** support such an incremental population of adaptive QuestionnaireResponses.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,186,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-adaptive-questionnaires,"For performance, the DTR application **SHOULD** save the results of execution of CQL prior to the [`$next-question`](http://hl7.org/fhir/uv/sdc/STU3/OperationDefinition-Questionnaire-next-question.html) call.",SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,187,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-resumed-questionnairesresponses,"If DTR is launched using a previously saved QuestionnaireResponse, the DTR client SHOULD re-execute CQL to populate all empty elements, as well as those with an `origin.source` of ‘auto’.",SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,188,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-resumed-questionnairesresponses,[When re-running CQL prepopulation logic on resumed Questionnaires]  Any answers with an `origin.source` of ‘override’ or ‘manual’ **SHALL NOT** be changed.,SHALL NOT,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,189,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-resumed-questionnairesresponses,"if pre-population would have asserted a value for an answer with an `origin.source` of ‘manual’ [when running on a previously completed form], the `origin.source` SHALL be changed to ‘override’.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,190,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#library-dependencies,The engine **SHALL** make available to the execution context all ... referenced CQL libraries using the relatedArtifact element].,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,191,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,"If the CQL is malformed (is not syntactically correct) in any way, the app’s execution engine **SHALL NOT** attempt any execution of the malformed CQL",SHALL NOT,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,192,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,If the CQL is malformed (is not syntactically correct) in any way ... the client **SHALL** log the error,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,193,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,If the CQL is malformed (is not syntactically correct) in any way ...  the user **SHALL** be notified with an appropriate message indicating that population did not occur,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,194,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,"If the CQL is malformed (is not syntactically correct) in any way, ... the user … **SHALL** be allowed to enter the information manually either now or at a later time.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,195,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,The app **SHOULD** log failures and ensure the maintainer of the CQL/Questionnaire package is notified (see the [DTR Log Questionnaire Errors](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html) operation for details),SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,196,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,[When logging a malformed CQL error using the [DTR Log Questionnaire Errors](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html) operation] the details property of the OperationOutcome **SHOULD** use MSG_BAD_SYNTAX to indicate syntactical errors.,SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,197,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,[When logging a malformed CQL error using the [DTR Log Questionnaire Errors](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html) operation] The destination of the OperationOutcome will be the endpoint the malformed CQL/Questionnaire was retrieved from.,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,198,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,"If any errors are encountered during [CQL] execution, the app’s engine **SHALL NOT** attempt any further execution",SHALL NOT,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,199,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,If any errors are encountered during [CQL] execution … the user **SHALL** be notified with an appropriate on-screen error message,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,200,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,"If any errors are encountered during [CQL] execution … The user should have the option to complete the Questionnaire if possible, despite the error.",SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,201,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,The app **SHALL** log failures and ensure the maintainer of the CQL/Questionnaire package is notified using the [DTR Log Questionnaire Errors](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html) operation.,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,202,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,A query for data that returns no results **SHALL NOT** be considered a failure.,SHALL NOT,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,203,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#user-interaction-with-questionnaires,"Therefore, the system acting as a form filler is responsible for displaying all ‘enabled’ questions, groups, and display items to the end user for completion and/or review",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,204,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#user-interaction-with-questionnaires,"In some cases, the population process **MAY** populate all answers to the Questionnaire. The DTR client **SHALL** provide the ability, but NOT a requirement, for providers to review pre-populated answers prior to saving the resulting response for subsequent use within the EHR.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,205,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-rendering,[Client] Conformance with DTR requires conformance with the relevant portions of the SDC implementation guide [related to Questionnaire rendering].,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,206,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-rendering,All DTR applications **SHALL** support rendering according to the mustSupport elements in the DTR Questionnaire profile,SHALL,"Full EHR,SMART Client",false,,,"3.04, 3.05","dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_questionnaire_must_support, dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_must_support_attest"
hl7.fhir.us.davinci-dtr_2.0.1,207,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-rendering,All DTR applications **SHALL** support …  executing all CQL found within Questionnaire extensions.,SHALL,"Full EHR,SMART Client",false,,,"1.1.2.02, 1.2.2.01, 1.2.3.03, 2.1.3.03, 2.2.2.01, 2.2.3.03, 2.3.1.2.01, 2.3.4.03","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_static_workflow-dtr_smart_app_custom_static_rendering-dtr_prepopulation_attest, dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-Group02-dtr_prepopulation_attest, dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_resp_workflow-dtr_resp_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_static_dinner_workflow-dtr_smart_app_static_rendering-dtr_smart_app_prepopulation_attest, dtr_smart_app-Group02-dtr_smart_app_static_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_adaptive_retrieval-dtr_smart_app_initial_questionnaire_rendering-dtr_smart_app_prepopulation_attest, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_saving_qr-dtr_qr_prepopulation"
hl7.fhir.us.davinci-dtr_2.0.1,209,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#separating-user-provided-information-from-cql-retrieved-information,"When a user fills in a value or changes an answer in a QuestionnaireResponse, the DTR client **SHALL** populate the InformationOrigin extension, setting the ‘author’ property to the current user",SHALL,"Full EHR,SMART Client",false,,,1.1.3.03,dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_static_workflow-dtr_smart_app_saving_qr-dtr_smart_app_qr_correctness
hl7.fhir.us.davinci-dtr_2.0.1,210,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#separating-user-provided-information-from-cql-retrieved-information,"When a user fills in a value or changes an answer in a QuestionnaireResponse, the DTR client **SHALL** populate the InformationOrigin extension, …  setting ‘source’ to ‘override’ if the source was already ‘override’ or ‘auto’, or ‘manual’ otherwise.",SHALL,"Full EHR,SMART Client",false,,,"1.1.3.03, 1.2.1.04, 2.3.1.1.04, 2.3.2.1.03, 2.3.3.1.03","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_static_workflow-dtr_smart_app_saving_qr-dtr_smart_app_qr_correctness, dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_custom_adaptive_retrieval-dtr_adaptive_response_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_adaptive_retrieval-dtr_smart_app_adaptive_initial_retrieval-dtr_adaptive_response_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation"
hl7.fhir.us.davinci-dtr_2.0.1,212,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,The DTR client **SHALL** validate the QuestionnaireResponse on an ongoing basis as the user is reviewing and entering data.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,213,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,The client **SHALL** visually flag any elements that require adjustment to meet validation rules.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,214,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,"For Standard Questionnaires, when the QuestionnaireResponse is valid, the DTR client **SHALL** indicate that to the user and allow them to mark the QuestionnaireResponse as complete",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,215,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,"For Standard Questionnaires, when the QuestionnaireResponse is valid [and complete],  the user **MAY** opt to continue making changes or save the QuestionnaireResponse in draft form.",MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,216,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,The DTR app **SHALL NOT** mark a Standard QuestionnaireResponse as ‘complete’ automatically.,SHALL NOT,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,217,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,The DTR client **SHALL NOT** allow the user to indicate they are ready for the next question/set of questions until the answers to the current QuestionnaireResponse pass validation rules.,SHALL NOT,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,221,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#additional-considerations,"If a questionnaire or question is marked as ‘signatureRequired’, then the DTR client will need to add a ‘signature’ extension element to the appropriate location in the QuestionnaireResponse. The signature would attest to the QuestionnaireResponse as a whole, or to the specific item the signature appears on – excluding any signature extensions themselves.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,222,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#additional-considerations,"[When the answer to a question modified by a user ... [is] input to an expression driving other logic within the questionnaire ... DTR clients **SHALL** monitor for changes to dependent questionnaire answers and re-execute logic, adjusting calculatedValues, enabling elements, adjusting validation rules, etc. based on changes made by the user.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,224,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#storing-questionnaireresponses,"At any point prior to completion the DTR client **SHALL** be able to save the ‘in-progress’ QuestionnaireResponse, either to ensure that work-in-progress is not lost, or to allow the user to close the session and then relaunch it later.",SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,225,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#storing-questionnaireresponses,"When the QuestionnaireResponse has been marked as ‘complete’, the DTR client **SHALL** save the QuestionnaireResponse to the EHR using a create (POST) if the record had not previously been stored",SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,226,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#storing-questionnaireresponses,"When the QuestionnaireResponse has been marked as ‘complete’, the DTR client **SHALL** save the QuestionnaireResponse to the EHR using … an update (PUT) if the record had already been saved at least once.",SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,227,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#storing-questionnaireresponses,[The completed QuestionnaireResponse] resource **SHOULD** be saved to the patient record in the EHR system of the healthcare provider if supported.,SHOULD,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,228,,[The completed QuestionnaireResponse resource] **MAY** also be transmitted to the payer IT system.,MAY,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,231,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"In those cases where a QuestionnaireResponse is to be used to convey information either to the payer or to downstream service providers, the DTR Client **SHALL** ‘wrap’ the QuestionnaireResponse in a ‘collection’ Bundle complying with the [questionnaireResponseBundle](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-DTR-QRBundle.html) profile.",SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,232,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,This [packaged [QuestionnaireResponse](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-DTR-QRBundle.html)] Bundle will include the QuestionnaireResponse entry as its initial entry,SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,233,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,This [packaged [QuestionnaireResponse](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-DTR-QRBundle.html)] Bundle ...  will then also include any resources that are referenced by the QuestionnaireResponse as answerReference that are not already contained within the QuestionnaireResponse.,SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,234,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"NOTE: Only those resources directly referenced in the QuestionnaireResponse are included. If further references from a referenced resource are desired, the designer of the Questionnaire must ensure that these are also included as answers (possibly as hidden answers automatically populated by CQL within the Questionnaire).",SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,235,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"While multiple purposes are possible, the expectation is that all information in the QuestionnaireResponse will be used for that purpose - e.g., If a QuestionnaireResponse had a purpose of ‘prior authorization’ and ‘order transmission’, then the full QuestionnaireResponse bundle would be sent as a prior authorization attachment and as an attachment when the order is sent to the performer.",SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,236,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"If there is a desire to send different content to different recipients, then distinct QuestionnaireResponses **SHALL** be used.",SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,237,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"the process by which attachments to prior auth requests, claims or orders are assembled ... could be done automatically",MAY,"Full EHR,SMART Client",true,Not Tested,"automatic or manual allowed, no clear impact on downstream functionality",NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,238,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"the process by which attachments to prior auth requests, claims or orders are assembled ... could be done ... with human review.",MAY,"Full EHR,SMART Client",true,Not Tested,"automatic or manual allowed, no clear impact on downstream functionality",NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,242,"https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-full-dtr-ehr.html#behavior, https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html#behavior","[Full EHR, SMART Clients] **SHALL** support the [`$questionnaire-package`](http://hl7.org/fhir/us/davinci-dtr/OperationDefinition/questionnaire-package) operation.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,243,"https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-full-dtr-ehr.html#behavior, https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html#behavior","[Full EHR, SMART Clients] **SHALL** support the [`$expand`]http://hl7.org/fhir/OperationDefinition/ValueSet-expand) operation.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,244,"https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-full-dtr-ehr.html#behavior, https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html#behavior","[Full EHR, SMART Clients] **SHALL** support the [`$next-question`](http://hl7.org/fhir/uv/sdc/OperationDefinition/Questionnaire-next-question) operation.",SHALL,"Full EHR,SMART Client",false,,,"1.2.1.03, 1.2.1.04, 2.3.1.1.03, 2.3.1.1.04, 2.3.2.1.01, 2.3.2.1.02, 2.3.2.1.03, 2.3.3.1.01, 2.3.3.1.02, 2.3.3.1.03","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_custom_adaptive_retrieval-dtr_adaptive_next_question_request_validation, dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_custom_adaptive_retrieval-dtr_adaptive_response_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_adaptive_retrieval-dtr_smart_app_adaptive_initial_retrieval-dtr_adaptive_next_question_request_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_adaptive_retrieval-dtr_smart_app_adaptive_initial_retrieval-dtr_adaptive_response_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_next_question_request, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_next_question_request_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_next_question_request, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_next_question_request_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation"
hl7.fhir.us.davinci-dtr_2.0.1,245,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the read interaction for Coverage resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,246,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the create interaction for Coverage resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,247,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the update interaction for Coverage resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,248,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the search-type interaction for Coverage resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,249,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support searching for the Coverage using context,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,250,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support searching for the Coverage using patient,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,251,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the read interaction for Encounter resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,252,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the read interaction for DeviceRequest resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,253,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the read interaction for MedicationRequest resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,254,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the read interaction for NutritionOrder resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,255,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the read interaction for CommunicationRequest resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,256,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the read interaction for ServiceRequest resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,257,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the read interaction for VisionPrescription resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,258,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the read interaction for Task resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,259,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the create interaction for Task resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,260,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** support the update interaction for Task resources,SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,261,https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html,[SMART Clients] **SHALL** comply with requirements in http://hl7.org/fhir/us/core/CapabilityStatement/us-core-client [[version 3.1.1](https://hl7.org/fhir/us/core/STU3.1.1/CapabilityStatement-us-core-client.html)],SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,283,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,[The `$log-questionnaire-errors`] operation **SHOULD** be supported by … DTR applications,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,285,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,DTR Applications **SHALL** submit to the log errors operation a body conforming to the [DTR Log Questionnaire Errors Input Parameters](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-log-errors-input-parameters.html) Profile,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,286,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] **SHOULD** include information on the DTR application identity,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,287,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] **SHOULD** include information on the DTR application … version,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,288,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] **SHOULD** include … [the] date-time with time-zone offset,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,289,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] **SHOULD** include … the provider endpoint during which the error occurred,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,290,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] ... **SHALL NOT** contain information about the response or information retrieved from FHIR APIs that could potentially include PHI,SHALL NOT,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,291,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The [input] Questionnaire reference [to the `$log-questionnaire-errors` operation] **SHOULD** be version-specific,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,293,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html,DTR Applications **SHALL** submit to the questionnaire package operation inputs conforming to the [DTR Questionnaire Package Input Parameters](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-qpackage-input-parameters.html) Profile,SHALL,"Full EHR,SMART Client",false,,,"1.1.1.02, 1.2.1.02, 2.1.1.02, 2.2.1.02, 2.3.1.1.02, 3.02","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_static_workflow-dtr_smart_app_custom_static_retrieval-dtr_qp_request_validation, dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_custom_adaptive_retrieval-dtr_qp_request_validation, dtr_smart_app-Group02-dtr_smart_app_resp_workflow-dtr_resp_qp-dtr_qp_request_validation, dtr_smart_app-Group02-dtr_smart_app_static_dinner_workflow-dtr_smart_app_static_retrieval-dtr_qp_request_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_adaptive_retrieval-dtr_smart_app_adaptive_initial_retrieval-dtr_qp_request_validation, dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_qp_request_validation"
hl7.fhir.us.davinci-dtr_2.0.1,295,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html,The [DTR questionnaire package] operation **SHALL** take as input the Coverage resource(s) identifying the member and the type(s) of Coverage for which additional information is needed,SHALL,"Full EHR,SMART Client",false,,,"1.1.1.02, 1.2.1.02, 2.1.1.02, 2.2.1.02, 2.3.1.1.02, 3.02","dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_static_workflow-dtr_smart_app_custom_static_retrieval-dtr_qp_request_validation, dtr_smart_app-dtr_smart_app_basic_workflows-dtr_smart_app_custom_adaptive_workflow-dtr_smart_app_custom_adaptive_retrieval-dtr_qp_request_validation, dtr_smart_app-Group02-dtr_smart_app_resp_workflow-dtr_resp_qp-dtr_qp_request_validation, dtr_smart_app-Group02-dtr_smart_app_static_dinner_workflow-dtr_smart_app_static_retrieval-dtr_qp_request_validation, dtr_smart_app-Group02-dtr_smart_app_adaptive_dinner_workflow-dtr_smart_app_adaptive_retrieval-dtr_smart_app_adaptive_initial_retrieval-dtr_qp_request_validation, dtr_smart_app-dtr_smart_app_questionnaire_ms-dtr_qp_request_validation"
hl7.fhir.us.davinci-dtr_2.0.1,296,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html,"The [DTR questionnaire package] operation **SHALL** take as input … at least one of:

- Zero or more canonicals specifying the URL and, (optionally) the version of the Questionnaire(s) to retrieve;
- A CRD/PAS context ID, and/or
- One or more Request or Encounter resources",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,327,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html,"When resuming a work in progress questionnaire response the DTR client **SHALL** invoke the [questionnaire package] operation with the timestamp to see if the questionnaire package has changed since it was last retrieved, presuming that the QuestionnaireResponse.meta.lastUpdated element corresponds to the last package retrieval time.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,328,https://hl7.org/fhir/us/davinci-dtr/STU2/metrics.html,each implementation should [capture the defined metrics],SHOULD,"Full EHR,Light EHR,SMART Client,Payer Service",false,Not Tested,metrics are optional at this time,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,329,https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-DTRMetricData.html,[DTR Metric Data] **SHOULD**  be collected and maintained for each DTR system action.,SHOULD,"Full EHR,Light EHR,SMART Client,Payer Service",false,Not Tested,metrics are optional at this time,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,331,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL be familiar with and adhere primarily to any security and privacy rules defined by Da Vinci HRex Privacy and Security,SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,332,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … FHIR core: … [Security & Privacy module](http://hl7.org/fhir/R4/secpriv-module.html),SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,333,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … FHIR core: … [Security Principles](http://hl7.org/fhir/R4/security.html),SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,334,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … FHIR core: … [Implementer’s Checklist](http://hl7.org/fhir/R4/safety.html),SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,335,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … [HRex: [Privacy & Security](http://hl7.org/fhir/us/davinci-hrex/STU1/security.html)],SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,336,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … SMART on FHIR: [SMART App Launch Framework](https://www.hl7.org/fhir/smart-app-launch/),SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,340,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Providers **SHOULD** ask the patient if they want to share the information with the payer prior to manually populating it in any QuestionnaireResponses.,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,344,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,It is important for implementers to be aware that data is going to be auto-populated that could be considered sensitive - so there will likely be a need for a human to review and confirm that the information is appropriate to be shared (and be able to remove it without risk of it being put back if they wish).,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,345,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,[T]he app MAY not have access to certain data for retrieval because of security considerations.,MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,347,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#general-considerations,This implementation guide adopts by reference ... HRex Conformance Requirements [([*Conformance Expectations*](https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html))] which describe ... rules around mustSupport [for consumers that apply to DTR clients that receive [DTR Questionnaire for adaptive form](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-questionnaire-adapt.html)],SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,349,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#general-considerations,This implementation guide adopts by reference ... HRex Conformance Requirements [([*Conformance Expectations*](https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html))] which describe ... rules around mustSupport [for consumers that apply to DTR clients that receive [DTR Questionnaire for adaptive form Search](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-questionnaire-adapt-search.html)],SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,351,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#general-considerations,This implementation guide adopts by reference ... HRex Conformance Requirements [([*Conformance Expectations*](https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html))] which describe ... rules around mustSupport [for consumers that apply to DTR clients that receive [DTR Standard Questionnaire](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-std-questionnaire.html)],SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,357,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#general-considerations,This implementation guide adopts by reference ... HRex Conformance Requirements [([*Conformance Expectations*](https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html))] which describe ... rules around mustSupport [element population for data sources that apply to SMART Clients when creating or updating instances of Da Vinci-defined profiles explicitly listed in the [DTR SMART Client Capability Statement](https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html).],SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,358,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#general-considerations,This implementation guide adopts by reference ... HRex Conformance Requirements [([*Conformance Expectations*](https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html))] which describe ... rules around mustSupport [element processing for consumers that apply to SMART Clients when reading or searching for instances of Da Vinci-defined profiles explicitly listed in the [DTR SMART Client Capability Statement](https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html).],SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,359,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#separating-user-provided-information-from-cql-retrieved-information,DTR [SMART] clients **SHALL** [request user details using the `fhirUser` scope],SHALL,SMART Client,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,361,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … Data Sources **SHALL** be capable of populating the data element when sharing resources compliant with the profile. I.e. the system must be able to demonstrate the population and sharing of the element",SHALL,"Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,362,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … it is acceptable to omit the [must support] element if the [data source] system doesn't have values in a particular instance.",MAY,"Light EHR,SMART Client,Payer Service",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,363,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … Data Consumers **SHALL** be capable of processing resource instances containing the data elements without generating an error or causing the application to fail.",SHALL,"Full EHR,Light EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,364,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … [i]f the minimum cardinality of an element is greater than 0 – i.e. the element is ‘required’, then the element **SHALL** be present in the instance",SHALL,"Light EHR,SMART Client,Payer Service",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,365,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] …  [i]f the minimum cardinality of an element is greater than 0 – i.e. the element is ‘required’, then the element ... **SHALL** have a value unless:

- The profile explicitly declares the dataAbsentReason extension or other extension for the element, in which case an extension can be present in place of the value. [or]
- The profile is inherited from U.S. Core, in which case a dataAbsentReason extension may be sent in place of the value even where dataAbsentReason is not explicitly declared in the profile.",SHALL,"Light EHR,SMART Client,Payer Service",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,366,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … Data Consumers **SHALL** interpret missing data elements within resource instances as data not being present in the Data Source’s systems or was not deemed to be shareable with the Data Consumer for privacy or other business reasons.",SHALL,"Full EHR,Light EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,367,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … [w]here the value set for an element includes concepts such as “unknown”, “refused to answer”, “not available” or where dataAbsentReason is explicitly referenced in a profile, then Data Sources **SHALL** use these values/that extension to communicate the reason for missing data.",SHALL,"Light EHR,SMART Client,Payer Service",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,368,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … Data Consumers **SHALL** be able to process resource instances containing data elements that have extensions in place of a value where such extensions are declared as part of the profile.",SHALL,"Full EHR,Light EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,369,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,[Data sources] are free to include additional data [beyond the must support elements],MAY,"Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,370,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,[R]eceivers **SHOULD NOT** reject instances that contain unexpected [non-must support] data elements if those elements are not [modifier elements](http://hl7.org/fhir/R4/conformance-rules.html#isModifier).,SHOULD NOT,"Full EHR,Light EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,371,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"[Data Sources] should be aware that they can't count on receivers storing, processing or doing anything other than ignoring data that is not marked as mustSupport.",SHOULD,"Light EHR,SMART Client,Payer Service",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,372,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"Many of the profiles in this guide reference other FHIR resources that are US Core profiles. This is defined in the formal profile definitions. For example, US Core Patient. For any other references not formally defined in a US Core profiles, the referenced resource **SHOULD** be a US Core profile if a US Core profile exists for the resource type.",SHOULD,"Light EHR,SMART Client,Payer Service",true,,,"",""
