Req Set,ID,URL,Requirement,Conformance,Actors,Conditionality,Not Tested Reason,Not Tested Details,Da Vinci DTR Full EHR Test Suite Short ID(s),Da Vinci DTR Full EHR Test Suite Full ID(s)
hl7.fhir.us.davinci-dtr_2.0.1,4,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,DTR apps and EHRs that take on DTR app responsibility **SHALL** be able to render Questionnaires,SHALL,"Full EHR,SMART Client",false,,,2.1.2.01,dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow-dtr_full_ehr_custom_static_rendering-dtr_rendering_attest
hl7.fhir.us.davinci-dtr_2.0.1,5,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,DTR apps and EHRs that take on DTR app responsibility **SHALL** be able to render ... QuestionnaireResponses.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,6,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: ... QuestionnaireResponse.questionnaire.questionnaireDisplay,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,7,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: ... [QuestionnaireResponse.questionnaire.resolve().title],SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,8,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: ... QuestionnaireResponse.authored,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,9,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: .. QuestionnaireResponse.author.resolve().name,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,10,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … QuestionnaireResponse.source.resolve().name,SHALL,"Full EHR,SMART Client",false,Not Tested,"QuestionnaireResponse.source is not must support or required, so these systems are not required to support it.",NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,11,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … QuestionnaireResponse.item.text,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,12,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … QuestionnaireResponse.item.value - all data types,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,13,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … The same [QuestionnaireResponse.item.text] for all nested items,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,14,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[A]pps and EHRs acting as form fillers **SHALL** be able to display: … The same [all data types of QuestionnaireResponse.item.value] for all nested items,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,15,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[Form filling systems] **SHALL** also handle all mustSupport elements within the Questionnaire profile,SHALL,"Full EHR,SMART Client",false,,,"4.04, 4.05","dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_questionnaire_must_support, dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_must_support_attest"
hl7.fhir.us.davinci-dtr_2.0.1,16,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,"[Form filling systems] **SHALL** …  provide visual cues where those elements impact expected user action (e.g., required answers, need for signatures, etc.)",SHALL,"Full EHR,SMART Client",false,,,4.05,dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_must_support_attest
hl7.fhir.us.davinci-dtr_2.0.1,17,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#must-support,[Form filling] systems **SHOULD** be able to display Q[uestionnaire]R[esponse].item.itemMedia,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,19,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#impact-on-payer-processes,"In situations where the DTR App is aware of the likely billing codes at the time of ordering, it might send these codes as additional CodeableConcept.coding repetitions to assist in server processing.",MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,20,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#impact-on-payer-processes,"If CPT is used , note the ability to convey CPT modifier codes via post-coordination as described in the Using CPT page on [terminology.hl7.org](https://terminology.hl7.org/).",MAY,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,21,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,[A]ll DTR apps **SHALL** be registered with the payer systems with which they communicate.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,22,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,"If an EHR opts to interact with the payer directly without using an app, then the EHR itself will need to register.",SHALL,Full EHR,false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,29,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,"Even after an application has been successfully registered, … EHRs **SHOULD** monitor the application behavior",SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,30,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,"Even after an application has been successfully registered, … EHRs ... **MAY** suspend an application’s access if it is suspected of malicious behavior.",MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,31,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,"Some payers may create Questionnaires that rely on code systems that require licensing for use where there isn’t already a cross-U.S. license in place (e.g., UB, CPT). In such cases, the payer, provider, and if necessary, the SMART on FHIR app vendor will need to have the relevant licenses to display, store, and retransmit the information captured.",SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,32,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#configuring-appehr-to-payer-connectivity,The expectations around licensing requirements should be established as part of the configuration process between the parties.,SHOULD,"Full EHR,Light EHR,SMART Client,Payer Service",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,35,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-use,DTR apps and Full EHRs **SHALL** support ... [[standard](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-std-questionnaire.html) ... Questionnaires.,SHALL,"Full EHR,SMART Client",false,,,"2.1, 3.1","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow"
hl7.fhir.us.davinci-dtr_2.0.1,36,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-use,DTR apps and Full EHRs **SHALL** support ... [adaptive](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-questionnaire-adapt.html)] ... Questionnaires.,SHALL,"Full EHR,SMART Client",false,,,3.2,dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow
hl7.fhir.us.davinci-dtr_2.0.1,38,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#adaptive-form-considerations,"If the [[`questionnaire-adaptive`](http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-questionnaireAdaptive)] extension is simply a boolean value of ‘true’, then the [[`$next-question`](http://hl7.org/fhir/uv/sdc/STU3/OperationDefinition-Questionnaire-next-question.html)] operation endpoint [for the client to use] is the payer base URL. (i.e., [base]/$next-question).",SHALL,"Full EHR,SMART Client",true,,,"2.2.1.05, 3.2.1.1.05, 3.2.2.1.03, 3.2.3.1.03","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_adaptive_response_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_adaptive_response_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation"
hl7.fhir.us.davinci-dtr_2.0.1,39,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#adaptive-form-considerations,"If the [[`questionnaire-adaptive`](http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-questionnaireAdaptive)] extension is a url, then that is the base for the next question [[operation](http://hl7.org/fhir/uv/sdc/STU3/OperationDefinition-Questionnaire-next-question.html) endpoint for the client to use] (i.e., [url]/$next-question).",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,51,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determinations-from-adaptive-forms,"[When a payer returns a coverage-information extension indicating 'additional documentation required', a client] **MAY** ... [trigger] a subsequent launch of DTR, or could result in the DTR client prompting the user as to whether they want to move on to filling out the new form(s).",MAY,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,55,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#determinations-from-adaptive-forms,"If an adaptive questionnaire response includes an unsolicited determination that authorization requirements have been ‘satisfied’, the EHR **SHALL** allow the clinician to flag the provided determination number as “not valid”. For example, If they feel the determination was based on incorrect information.",SHALL,"Full EHR,Light EHR",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,65,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-design,Elements flagged as mustSupport [in the [Standard Questionnaire profile](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-std-questionnaire.html)] **SHALL** be supported by DTR Apps and Full EHRs.,SHALL,"Full EHR,SMART Client",false,,,"4.04, 4.05","dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_questionnaire_must_support, dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_must_support_attest"
hl7.fhir.us.davinci-dtr_2.0.1,66,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-design,Elements flagged as mustSupport [in the [[Adaptive Questionnaire profile](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-questionnaire-adapt.html)] **SHALL** be supported by DTR Apps and Full EHRs.,SHALL,"Full EHR,SMART Client",false,,,"4.04, 4.05","dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_questionnaire_must_support, dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_must_support_attest"
hl7.fhir.us.davinci-dtr_2.0.1,67,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-design,[Questionnaire client] systems **SHOULD** also support all non mustSupport data extensions included in the differential of the DTR Questionnaire profiles as per SDC documentation for those elements and extensions,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,68,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-design,"[Questionnaire client] systems … **SHALL** gracefully handle the presence of these elements [representing Qestionnaire data extensions that are not must support]  if not supported (i.e., non-support for an element **SHALL NOT** interfere with a user’s ability to complete a QuestionnaireResponse.)",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,76,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#provider-attestation,Attachments [for attachment type questions] might be found … by the provider directly uploading something to the Questionnaire rendering tool.,MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,78,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-expiry,The DTR App or EHR can then check against that [Questionnaire.effectivePeriod] period when resuming a previously stored QuestionnaireResponse [and discard it if the period has ended].,SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,91,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#organizing-cql-within-questionnaires,"If a given variable evaluates to null the answer will be left empty, for the end user to complete.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,152,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#authenticating-dtr-client-to-payer-api,"The scopes necessary [for a DTR client to request from the payer] are:

- system/questionnaire.rs
- system/valueset.rs
- system/library.rs",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,165,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,The [[`$questionnaire-package`](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html)] operation will be invoked with a ‘POST’,SHALL,"Full EHR,SMART Client",false,,,"2.1.1.02, 2.2.1.02, 3.1.1.02, 3.2.1.1.02, 4.01","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow-dtr_full_ehr_custom_static_retrieval-dtr_full_ehr_qp_request, dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_full_ehr_custom_adative_request, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow-dtr_full_ehr_static_retrieval-dtr_full_ehr_qp_request, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_full_ehr_adaptive_request, dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_full_ehr_ms_qp_request"
hl7.fhir.us.davinci-dtr_2.0.1,166,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,The [[`$questionnaire-package`](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html)] operation will … [target] the base endpoint associated with the coverages provided based on payer configuration.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,167,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,"If multiple Coverages are provided that are associated with payers having different endpoints, then the operation will be invoked once per payer endpoint. e.g., POST [base]/$questionnaire-package",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,168,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,The operation will be invoked passing a [DTR Questionnaire Package Input Parameters](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-qpackage-input-parameters.html),SHALL,"Full EHR,SMART Client",false,,,"2.1.1.03, 2.2.1.03, 3.1.1.03, 3.2.1.1.03, 4.02","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow-dtr_full_ehr_custom_static_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow-dtr_full_ehr_static_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_qp_request_validation"
hl7.fhir.us.davinci-dtr_2.0.1,170,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,"If any of the retrieved Questionnaires have an effectivePeriod that ends prior to the current date, then the DTR client **SHALL** change the status of any retrieved work-in-progress QuestionnaireResponses for the expired Questionnaires to ‘stopped’",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,171,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,"If any of the retrieved Questionnaires have an effectivePeriod that ends prior to the current date, then the DTR client **SHALL** ... notify the user that the previously recorded content has expired.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,172,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieving-questionnaire-packages,"If an expired Questionnaire is retrieved when it wasn’t explicitly requested by referring to a canonical version, but instead by passing in the relevant order(s) and/or context id, the DTR client **SHOULD** report an error to the payer.",SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,173,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#pre-populating-questionnaireresponses,"Prior to exposing the draft QuestionnaireResponse to the user for completion and/or review, the DTR client **SHALL** execute all CQL necessary to resolve the initialExpression, candidateExpression and calculatedExpression extensions found in the Questionnaire for any enabled elements.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,174,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#pre-populating-questionnaireresponses,All items that are pre-populated …  from data retrieved from the EHR ... **SHALL** have their origin.source set to ‘auto’.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,176,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#execution-sequence,"The client will proceed through the Questionnaire, and for any question that is associated with the result of a CQL expression, that specific CQL statement will be executed.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,177,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#execution-sequence,The DTR client **SHALL** use result caching so that [CQL execution] results that are already available will be reused without requesting them again.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,178,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#execution-sequence,DTR clients **SHALL** iterate as necessary [executing CQL to prepopulate a enabled elements] until a steady state is reached.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,179,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#execution-sequence,"If dependencies are such that a steady state cannot be reached (e.g., an item that is enabled causes a value to be set which causes a different item to be enabled, that then disables the first item…), then the Questionnaire **SHALL** be treated as erroneous and attempts at automatic population **SHALL** end, with the user being informed of that.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,180,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieval-of-patient-fhir-resources-to-supply-to-cql-execution-engine,The DTR client **SHALL** retrieve the FHIR resources specified in the dataRequirement section of a Library.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,182,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieval-of-patient-fhir-resources-to-supply-to-cql-execution-engine,"The app’s CQL execution engine **SHOULD** constrain queries to reduce data retrieval overhead. (For example, if the CQL logic filters for medications meeting certain conditions, it is acceptable if the engine retrieves all medications for the patient, even if a more constrained query was possible).",SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,183,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieval-of-patient-fhir-resources-to-supply-to-cql-execution-engine,"To reduce data transfers and increase overall speed, data **MAY** be fetched [by clients] as needed.",MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,184,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#retrieval-of-patient-fhir-resources-to-supply-to-cql-execution-engine,the app’s execution engine **MAY** be implemented using a different strategy (for example by doing bulk fetches before starting execution).,MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,185,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-adaptive-questionnaires,"The population process must ... happen after each call to [`$next-question`](http://hl7.org/fhir/uv/sdc/STU3/OperationDefinition-Questionnaire-next-question.html), populating any newly available questions. DTR clients **SHALL** support such an incremental population of adaptive QuestionnaireResponses.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,186,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-adaptive-questionnaires,"For performance, the DTR application **SHOULD** save the results of execution of CQL prior to the [`$next-question`](http://hl7.org/fhir/uv/sdc/STU3/OperationDefinition-Questionnaire-next-question.html) call.",SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,187,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-resumed-questionnairesresponses,"If DTR is launched using a previously saved QuestionnaireResponse, the DTR client SHOULD re-execute CQL to populate all empty elements, as well as those with an `origin.source` of ‘auto’.",SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,188,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-resumed-questionnairesresponses,[When re-running CQL prepopulation logic on resumed Questionnaires]  Any answers with an `origin.source` of ‘override’ or ‘manual’ **SHALL NOT** be changed.,SHALL NOT,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,189,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#populating-resumed-questionnairesresponses,"if pre-population would have asserted a value for an answer with an `origin.source` of ‘manual’ [when running on a previously completed form], the `origin.source` SHALL be changed to ‘override’.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,190,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#library-dependencies,The engine **SHALL** make available to the execution context all ... referenced CQL libraries using the relatedArtifact element].,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,191,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,"If the CQL is malformed (is not syntactically correct) in any way, the app’s execution engine **SHALL NOT** attempt any execution of the malformed CQL",SHALL NOT,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,192,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,If the CQL is malformed (is not syntactically correct) in any way ... the client **SHALL** log the error,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,193,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,If the CQL is malformed (is not syntactically correct) in any way ...  the user **SHALL** be notified with an appropriate message indicating that population did not occur,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,194,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,"If the CQL is malformed (is not syntactically correct) in any way, ... the user … **SHALL** be allowed to enter the information manually either now or at a later time.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,195,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,The app **SHOULD** log failures and ensure the maintainer of the CQL/Questionnaire package is notified (see the [DTR Log Questionnaire Errors](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html) operation for details),SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,196,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,[When logging a malformed CQL error using the [DTR Log Questionnaire Errors](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html) operation] the details property of the OperationOutcome **SHOULD** use MSG_BAD_SYNTAX to indicate syntactical errors.,SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,197,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-receiving-malformed-cql,[When logging a malformed CQL error using the [DTR Log Questionnaire Errors](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html) operation] The destination of the OperationOutcome will be the endpoint the malformed CQL/Questionnaire was retrieved from.,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,198,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,"If any errors are encountered during [CQL] execution, the app’s engine **SHALL NOT** attempt any further execution",SHALL NOT,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,199,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,If any errors are encountered during [CQL] execution … the user **SHALL** be notified with an appropriate on-screen error message,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,200,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,"If any errors are encountered during [CQL] execution … The user should have the option to complete the Questionnaire if possible, despite the error.",SHOULD,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,201,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,The app **SHALL** log failures and ensure the maintainer of the CQL/Questionnaire package is notified using the [DTR Log Questionnaire Errors](https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html) operation.,SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,202,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#behavior-when-encountering-execution-errors,A query for data that returns no results **SHALL NOT** be considered a failure.,SHALL NOT,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,203,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#user-interaction-with-questionnaires,"Therefore, the system acting as a form filler is responsible for displaying all ‘enabled’ questions, groups, and display items to the end user for completion and/or review",SHALL,"Full EHR,SMART Client",false,,,3.2,dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow
hl7.fhir.us.davinci-dtr_2.0.1,204,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#user-interaction-with-questionnaires,"In some cases, the population process **MAY** populate all answers to the Questionnaire. The DTR client **SHALL** provide the ability, but NOT a requirement, for providers to review pre-populated answers prior to saving the resulting response for subsequent use within the EHR.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,205,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-rendering,[Client] Conformance with DTR requires conformance with the relevant portions of the SDC implementation guide [related to Questionnaire rendering].,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,206,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-rendering,All DTR applications **SHALL** support rendering according to the mustSupport elements in the DTR Questionnaire profile,SHALL,"Full EHR,SMART Client",false,,,"4.04, 4.05","dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_questionnaire_must_support, dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_must_support_attest"
hl7.fhir.us.davinci-dtr_2.0.1,207,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-rendering,All DTR applications **SHALL** support …  executing all CQL found within Questionnaire extensions.,SHALL,"Full EHR,SMART Client",false,,,"2.1.2.02, 2.2.2.01, 3.1.2.01, 3.2.1.2.01","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow-dtr_full_ehr_custom_static_rendering-dtr_prepopulation_attest, dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-Group02-dtr_prepopulation_attest, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow-dtr_full_ehr_static_rendering-dtr_full_ehr_prepopulation_attest, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_initial_questionnaire_rendering-dtr_full_ehr_prepopulation_attest"
hl7.fhir.us.davinci-dtr_2.0.1,208,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaire-rendering,CQL and FHIR Questionnaires **SHALL** be required even when DTR is implemented within a DTR Native App as opposed to a DTR SMART App.,SHALL,Full EHR,false,,,"2.1, 3.1, 3.2","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow"
hl7.fhir.us.davinci-dtr_2.0.1,209,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#separating-user-provided-information-from-cql-retrieved-information,"When a user fills in a value or changes an answer in a QuestionnaireResponse, the DTR client **SHALL** populate the InformationOrigin extension, setting the ‘author’ property to the current user",SHALL,"Full EHR,SMART Client",false,,,"2.1.3.03, 3.1.3.03","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow-dtr_full_ehr_saving_qr-dtr_full_ehr_qr_correctness, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow-dtr_full_ehr_saving_qr-dtr_full_ehr_qr_correctness"
hl7.fhir.us.davinci-dtr_2.0.1,210,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#separating-user-provided-information-from-cql-retrieved-information,"When a user fills in a value or changes an answer in a QuestionnaireResponse, the DTR client **SHALL** populate the InformationOrigin extension, …  setting ‘source’ to ‘override’ if the source was already ‘override’ or ‘auto’, or ‘manual’ otherwise.",SHALL,"Full EHR,SMART Client",false,,,"2.1.3.03, 2.2.1.05, 3.1.3.03, 3.2.1.1.05, 3.2.2.1.03, 3.2.3.1.03","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow-dtr_full_ehr_saving_qr-dtr_full_ehr_qr_correctness, dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_adaptive_response_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow-dtr_full_ehr_saving_qr-dtr_full_ehr_qr_correctness, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_adaptive_response_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation"
hl7.fhir.us.davinci-dtr_2.0.1,212,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,The DTR client **SHALL** validate the QuestionnaireResponse on an ongoing basis as the user is reviewing and entering data.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,213,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,The client **SHALL** visually flag any elements that require adjustment to meet validation rules.,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,214,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,"For Standard Questionnaires, when the QuestionnaireResponse is valid, the DTR client **SHALL** indicate that to the user and allow them to mark the QuestionnaireResponse as complete",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,215,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,"For Standard Questionnaires, when the QuestionnaireResponse is valid [and complete],  the user **MAY** opt to continue making changes or save the QuestionnaireResponse in draft form.",MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,216,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,The DTR app **SHALL NOT** mark a Standard QuestionnaireResponse as ‘complete’ automatically.,SHALL NOT,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,217,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#questionnaireresponse-validation,The DTR client **SHALL NOT** allow the user to indicate they are ready for the next question/set of questions until the answers to the current QuestionnaireResponse pass validation rules.,SHALL NOT,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,221,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#additional-considerations,"If a questionnaire or question is marked as ‘signatureRequired’, then the DTR client will need to add a ‘signature’ extension element to the appropriate location in the QuestionnaireResponse. The signature would attest to the QuestionnaireResponse as a whole, or to the specific item the signature appears on – excluding any signature extensions themselves.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,222,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#additional-considerations,"[When the answer to a question modified by a user ... [is] input to an expression driving other logic within the questionnaire ... DTR clients **SHALL** monitor for changes to dependent questionnaire answers and re-execute logic, adjusting calculatedValues, enabling elements, adjusting validation rules, etc. based on changes made by the user.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,223,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#storing-questionnaireresponses,"If an EHR system performs DTR functionality internally, it **MAY** save session information however it likes. The guidance below does NOT apply in this scenario.",MAY,Full EHR,true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,229,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"Upon storing a completed QuestionnaireResponse with a coverage-information extension, the EHR **SHALL** propagate the coverage-information extension to all non-Coverage resources included on the ‘context’ extension on the QuestionnaireResponse.",SHALL,"Full EHR,Light EHR",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,230,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"[When propagating coverage-information extensions] If a coverage-information already exists on the target resource with the same coverage-information.coverage, it **SHALL** be overridden.",SHALL,"Full EHR,Light EHR",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,231,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"In those cases where a QuestionnaireResponse is to be used to convey information either to the payer or to downstream service providers, the DTR Client **SHALL** ‘wrap’ the QuestionnaireResponse in a ‘collection’ Bundle complying with the [questionnaireResponseBundle](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-DTR-QRBundle.html) profile.",SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,232,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,This [packaged [QuestionnaireResponse](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-DTR-QRBundle.html)] Bundle will include the QuestionnaireResponse entry as its initial entry,SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,233,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,This [packaged [QuestionnaireResponse](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-DTR-QRBundle.html)] Bundle ...  will then also include any resources that are referenced by the QuestionnaireResponse as answerReference that are not already contained within the QuestionnaireResponse.,SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,234,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"NOTE: Only those resources directly referenced in the QuestionnaireResponse are included. If further references from a referenced resource are desired, the designer of the Questionnaire must ensure that these are also included as answers (possibly as hidden answers automatically populated by CQL within the Questionnaire).",SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,235,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"While multiple purposes are possible, the expectation is that all information in the QuestionnaireResponse will be used for that purpose - e.g., If a QuestionnaireResponse had a purpose of ‘prior authorization’ and ‘order transmission’, then the full QuestionnaireResponse bundle would be sent as a prior authorization attachment and as an attachment when the order is sent to the performer.",SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,236,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"If there is a desire to send different content to different recipients, then distinct QuestionnaireResponses **SHALL** be used.",SHALL,"Full EHR,SMART Client",true,Not Tested,Not compatible with the PAS approach to prior authorization submission,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,237,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"the process by which attachments to prior auth requests, claims or orders are assembled ... could be done automatically",MAY,"Full EHR,SMART Client",true,Not Tested,"automatic or manual allowed, no clear impact on downstream functionality",NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,238,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#passing-dtr-questionnaire-responses-to-downstream-processes,"the process by which attachments to prior auth requests, claims or orders are assembled ... could be done ... with human review.",MAY,"Full EHR,SMART Client",true,Not Tested,"automatic or manual allowed, no clear impact on downstream functionality",NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,242,"https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-full-dtr-ehr.html#behavior, https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html#behavior","[Full EHR, SMART Clients] **SHALL** support the [`$questionnaire-package`](http://hl7.org/fhir/us/davinci-dtr/OperationDefinition/questionnaire-package) operation.",SHALL,"Full EHR,SMART Client",false,,,"2.1.1.02, 2.2.1.02, 3.1.1.02, 3.2.1.1.02, 4.01","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow-dtr_full_ehr_custom_static_retrieval-dtr_full_ehr_qp_request, dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_full_ehr_custom_adative_request, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow-dtr_full_ehr_static_retrieval-dtr_full_ehr_qp_request, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_full_ehr_adaptive_request, dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_full_ehr_ms_qp_request"
hl7.fhir.us.davinci-dtr_2.0.1,243,"https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-full-dtr-ehr.html#behavior, https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html#behavior","[Full EHR, SMART Clients] **SHALL** support the [`$expand`]http://hl7.org/fhir/OperationDefinition/ValueSet-expand) operation.",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,244,"https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-full-dtr-ehr.html#behavior, https://hl7.org/fhir/us/davinci-dtr/STU2/CapabilityStatement-dtr-smart-client.html#behavior","[Full EHR, SMART Clients] **SHALL** support the [`$next-question`](http://hl7.org/fhir/uv/sdc/OperationDefinition/Questionnaire-next-question) operation.",SHALL,"Full EHR,SMART Client",false,,,"2.2.1.02, 2.2.1.04, 2.2.1.05, 3.2.1.1.02, 3.2.1.1.04, 3.2.1.1.05, 3.2.2.1.01, 3.2.2.1.02, 3.2.2.1.03, 3.2.3.1.01, 3.2.3.1.02, 3.2.3.1.03","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_full_ehr_custom_adative_request, dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_adaptive_next_question_request_validation, dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_adaptive_response_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_full_ehr_adaptive_request, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_adaptive_next_question_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_adaptive_response_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_next_question_request, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_next_question_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_followup_questions-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_next_question_request, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_next_question_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_adaptive_completion-dtr_adaptive_next_question_retrieval-dtr_adaptive_response_validation"
hl7.fhir.us.davinci-dtr_2.0.1,283,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,[The `$log-questionnaire-errors`] operation **SHOULD** be supported by … DTR applications,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,285,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,DTR Applications **SHALL** submit to the log errors operation a body conforming to the [DTR Log Questionnaire Errors Input Parameters](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-log-errors-input-parameters.html) Profile,SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,286,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] **SHOULD** include information on the DTR application identity,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,287,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] **SHOULD** include information on the DTR application … version,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,288,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] **SHOULD** include … [the] date-time with time-zone offset,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,289,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] **SHOULD** include … the provider endpoint during which the error occurred,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,290,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The input OperationOutcome resource  [to the `$log-questionnaire-errors` operation] ... **SHALL NOT** contain information about the response or information retrieved from FHIR APIs that could potentially include PHI,SHALL NOT,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,291,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-log-questionnaire-errors.html,The [input] Questionnaire reference [to the `$log-questionnaire-errors` operation] **SHOULD** be version-specific,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,293,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html,DTR Applications **SHALL** submit to the questionnaire package operation inputs conforming to the [DTR Questionnaire Package Input Parameters](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-qpackage-input-parameters.html) Profile,SHALL,"Full EHR,SMART Client",false,,,"2.1.1.03, 2.2.1.03, 3.1.1.03, 3.2.1.1.03, 4.02","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow-dtr_full_ehr_custom_static_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow-dtr_full_ehr_static_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_qp_request_validation"
hl7.fhir.us.davinci-dtr_2.0.1,295,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html,The [DTR questionnaire package] operation **SHALL** take as input the Coverage resource(s) identifying the member and the type(s) of Coverage for which additional information is needed,SHALL,"Full EHR,SMART Client",false,,,"2.1.1.03, 2.2.1.03, 3.1.1.03, 3.2.1.1.03, 4.02","dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_static_workflow-dtr_full_ehr_custom_static_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_basic_workflows-dtr_full_ehr_custom_adaptive_workflow-dtr_full_ehr_custom_adaptive_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_static_dinner_workflow-dtr_full_ehr_static_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_functionality-dtr_full_ehr_adaptive_dinner_workflow-dtr_full_ehr_adaptive_retrieval-dtr_full_ehr_adaptive_initial_retrieval-dtr_qp_request_validation, dtr_full_ehr-dtr_full_ehr_questionnaire_ms-dtr_qp_request_validation"
hl7.fhir.us.davinci-dtr_2.0.1,296,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html,"The [DTR questionnaire package] operation **SHALL** take as input … at least one of:

- Zero or more canonicals specifying the URL and, (optionally) the version of the Questionnaire(s) to retrieve;
- A CRD/PAS context ID, and/or
- One or more Request or Encounter resources",SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,327,https://hl7.org/fhir/us/davinci-dtr/STU2/OperationDefinition-questionnaire-package.html,"When resuming a work in progress questionnaire response the DTR client **SHALL** invoke the [questionnaire package] operation with the timestamp to see if the questionnaire package has changed since it was last retrieved, presuming that the QuestionnaireResponse.meta.lastUpdated element corresponds to the last package retrieval time.",SHALL,"Full EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,328,https://hl7.org/fhir/us/davinci-dtr/STU2/metrics.html,each implementation should [capture the defined metrics],SHOULD,"Full EHR,Light EHR,SMART Client,Payer Service",false,Not Tested,metrics are optional at this time,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,329,https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-DTRMetricData.html,[DTR Metric Data] **SHOULD**  be collected and maintained for each DTR system action.,SHOULD,"Full EHR,Light EHR,SMART Client,Payer Service",false,Not Tested,metrics are optional at this time,NA,NA
hl7.fhir.us.davinci-dtr_2.0.1,331,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL be familiar with and adhere primarily to any security and privacy rules defined by Da Vinci HRex Privacy and Security,SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,332,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … FHIR core: … [Security & Privacy module](http://hl7.org/fhir/R4/secpriv-module.html),SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,333,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … FHIR core: … [Security Principles](http://hl7.org/fhir/R4/security.html),SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,334,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … FHIR core: … [Implementer’s Checklist](http://hl7.org/fhir/R4/safety.html),SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,335,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … [HRex: [Privacy & Security](http://hl7.org/fhir/us/davinci-hrex/STU1/security.html)],SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,336,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Implementers SHALL also adhere to the security guidelines defined in: … SMART on FHIR: [SMART App Launch Framework](https://www.hl7.org/fhir/smart-app-launch/),SHALL,"Full EHR,Light EHR,SMART Client,Payer Service",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,340,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,Providers **SHOULD** ask the patient if they want to share the information with the payer prior to manually populating it in any QuestionnaireResponses.,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,344,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,It is important for implementers to be aware that data is going to be auto-populated that could be considered sensitive - so there will likely be a need for a human to review and confirm that the information is appropriate to be shared (and be able to remove it without risk of it being put back if they wish).,SHOULD,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,345,https://hl7.org/fhir/us/davinci-dtr/STU2/security.html,[T]he app MAY not have access to certain data for retrieval because of security considerations.,MAY,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,347,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#general-considerations,This implementation guide adopts by reference ... HRex Conformance Requirements [([*Conformance Expectations*](https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html))] which describe ... rules around mustSupport [for consumers that apply to DTR clients that receive [DTR Questionnaire for adaptive form](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-questionnaire-adapt.html)],SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,349,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#general-considerations,This implementation guide adopts by reference ... HRex Conformance Requirements [([*Conformance Expectations*](https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html))] which describe ... rules around mustSupport [for consumers that apply to DTR clients that receive [DTR Questionnaire for adaptive form Search](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-questionnaire-adapt-search.html)],SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,351,https://hl7.org/fhir/us/davinci-dtr/STU2/specification.html#general-considerations,This implementation guide adopts by reference ... HRex Conformance Requirements [([*Conformance Expectations*](https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html))] which describe ... rules around mustSupport [for consumers that apply to DTR clients that receive [DTR Standard Questionnaire](https://hl7.org/fhir/us/davinci-dtr/STU2/StructureDefinition-dtr-std-questionnaire.html)],SHALL,"Full EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,363,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … Data Consumers **SHALL** be capable of processing resource instances containing the data elements without generating an error or causing the application to fail.",SHALL,"Full EHR,Light EHR,SMART Client",false,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,366,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … Data Consumers **SHALL** interpret missing data elements within resource instances as data not being present in the Data Source’s systems or was not deemed to be shareable with the Data Consumer for privacy or other business reasons.",SHALL,"Full EHR,Light EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,368,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,"In the context of an HRex compliant IG, mustSupport on any data element **SHALL** be interpreted [to mean that] … Data Consumers **SHALL** be able to process resource instances containing data elements that have extensions in place of a value where such extensions are declared as part of the profile.",SHALL,"Full EHR,Light EHR,SMART Client",true,,,"",""
hl7.fhir.us.davinci-dtr_2.0.1,370,https://hl7.org/fhir/us/davinci-hrex/STU1/conformance.html,[R]eceivers **SHOULD NOT** reject instances that contain unexpected [non-must support] data elements if those elements are not [modifier elements](http://hl7.org/fhir/R4/conformance-rules.html#isModifier).,SHOULD NOT,"Full EHR,Light EHR,SMART Client",true,,,"",""
